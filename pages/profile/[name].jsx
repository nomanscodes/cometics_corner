import React, { useState, useEffect } from 'react'
import Layout from '@/Layouts/Layout'
import Head from 'next/head'
import { FiCalendar, FiMail, FiPhone } from 'react-icons/fi'
import MyOrder from '@/components/Profile/Order'
import Profile from '@/components/Profile/ShippingAddres'
import Following from '@/components/Profile/Following'


const UserProfile = () => {
    const [showTab, setShowTab] = useState("order")

    useEffect(() => {
        const storedTab = sessionStorage.getItem("tab");
        if (storedTab) {
            setShowTab(storedTab);
        }
    }, []);

    const tabControl = (tab) => {
        setShowTab(tab);
        sessionStorage.setItem("tab", tab);
    };

    return (
        <Layout>
            <Head>
                <title>user account</title>
                <meta name="description" content="Generated by create next app" />
                <meta name="viewport" content="width=device-width, initial-scale=1" />
                <link rel="icon" href="/favicon.ico" />
            </Head>
            <div className='md:px-3 md:mt-3'>
                <div className='heading md:flex items-center justify-between bg-white p-3 md:p-5 rounded shadow-sm'>
                    <div className='p-1 mb-1 md:hidden'>
                        <h4 className='text-[17px] font-medium'>My Profile</h4>
                    </div>
                    <div className='flex items-center gap-5 md:gap-2'>
                        <picture>
                            <img src="/avatar.png" className='h-14 w-14 rounded-full md:mb-0' alt="" />
                        </picture>
                        <div className='flex flex-col gap-1'>
                            <h5 className='capitalize text-[14px] md:text-[20px] md:text-gray-800 font-[450] text-bgColor'>sara ali khan</h5>
                            <div className='md:flex items-center md:gap-3'>
                                <span className='flex items-center gap-2 opacity-80'>
                                    <FiMail size={14} />
                                    <h4 className='text-[12px] md:text-[13px] font-medium text-green-700 md:text-gray-800'>saraalikhan@gmail.com</h4>
                                </span>
                                <hr className='hidden md:block w-4 rotate-90' />
                                <span className='hidden md:flex items-center gap-2 opacity-80'>
                                    <FiPhone size={14} />
                                    <h4 className='text-[13px] font-medium text-green-700 md:text-gray-800'>+088 0146575682</h4>
                                </span>
                                <hr className='hidden md:block w-4 rotate-90' />
                                <span className='hidden md:flex items-center gap-2'>
                                    <FiCalendar size={14} />
                                    <h4 className='text-[13px] font-medium opacity-80'><span className='opacity-70'>Joined</span> 23 August 2023</h4>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div className='hidden md:block'>
                        <button className='text-[14px] font-semibold text-white bg-bgColor p-2 rounded shadow-md'>Sing Out</button>
                    </div>
                </div>
                <div className='listItems md:mt-2 bg-white px-5 pt-3 pb-1 flex justify-start items-center overflow-x-auto scroll-smooth gap-6 rounded shadow-sm'>
                    <div onClick={() => tabControl("order")} className='w-fit flex flex-col gap-1 cursor-pointer'>
                        <h3 className='text-[13px] font-medium whitespace-nowrap'>My Order</h3>
                        <span className={` ${showTab === "order" ? `duration-500 opacity-100` : `opacity-0`} h-[2px] w-full bg-bgColor`}></span>
                    </div>
                    <div onClick={() => tabControl("shipping-address")} className='w-fit flex flex-col gap-1 cursor-pointer'>
                        <h3 className='text-[13px] font-medium whitespace-nowrap'>Shipping-address</h3>
                        <span className={` ${showTab === "shipping-address" ? `duration-500 opacity-100` : `opacity-0`} h-[2px] w-full bg-bgColor`}></span>
                    </div>
                    <div onClick={() => tabControl("following")} className='w-fit flex flex-col gap-1 cursor-pointer'>
                        <h3 className='text-[13px] font-medium'>Following</h3>
                        <span className={` ${showTab === "following" ? `duration-500 opacity-100` : `opacity-0`} h-[2px] w-full bg-bgColor`}></span>
                    </div>
                    <div onClick={() => tabControl("inbox")} className='w-fit flex flex-col gap-1 cursor-pointer'>
                        <h3 className='text-[13px] font-medium'>Inbox</h3>
                        <span className={` ${showTab === "inbox" ? `duration-500 opacity-100` : `opacity-0`} h-[2px] w-full bg-bgColor`}></span>
                    </div>

                </div>
                <div className='contentForm mt-2'>
                    <div className={`${showTab === "order" ? `w-full h-fit` : `hidden`}`}>
                        <MyOrder />
                    </div>
                    <div className={`${showTab === "shipping-address" ? `w-full h-fit` : `hidden`}`}>
                        <Profile />
                    </div>
                    <div className={`${showTab === "following" ? `w-full h-fit` : `hidden`}`}>
                        <Following />
                    </div>
                    <div className={`${showTab === "inbox" ? `w-full h-fit` : `hidden`}`}>
                        Inbox
                    </div>

                </div>
            </div>
        </Layout>

    )
}

export default UserProfile